<!DOCTYPE html>
<html data-n-head-ssr data-n-head="">
  <head>
    <meta data-n-head="true" charset="utf-8"/><meta data-n-head="true" name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/><meta data-n-head="true" name="description" content="文蔺的前端学习记录，国外技术文章翻译，个人学习心得等等这些都会记录在这里。"/><meta data-n-head="true" name="keywords" content="原创,Node.js,命令行工具"/><meta data-n-head="true" name="description" content="【nshm】 Node.js .sh scripts Manager"/><title data-n-head="true">Node.js .sh scripts Manager | 文蔺的博客</title><link data-n-head="true" rel="favicon" href="/favicon.ico"/><link rel="stylesheet" href="/static/common.5ad111a3.css"><style data-vue-ssr-id="645210e9:0">#__layout,#__nuxt,.wrapper{width:100%;height:100%}.main{height:100%}.main>article,.main>div,.main>section{min-height:100%;margin-bottom:-81px}.main>article:after,.main>div:after,.main>section:after{display:block;content:"";height:81px}.main>article,.main>div,.main>section{border-bottom:0}.main>#footer{position:relative;z-index:1;border-top:0}</style>
  </head>
  <body data-n-head="">
    <div data-server-rendered="true" id="__nuxt"><div class="nuxt-progress" style="width:0%;height:2px;background-color:black;opacity:0;"></div><div id="__layout"><div class="wrapper"><nav id="sidebar" class="behavior_1"><div class="wrap"><div class="profile"><a href="/" class="nuxt-link-active"><img src="/imgs/avatar.jpg" alt="文蔺的博客"></a><span>文蔺的博客</span></div><ul class="buttons"><li><a href="/" title="主页" class="nuxt-link-active"><i class="iconfont icon-home"></i><span> 主页</span></a></li><li><a href="/archives" title="归档"><i class="iconfont icon-archive"></i><span> 归档</span></a></li><li><a href="/tags" title="标签"><i class="iconfont icon-tags"></i><span> 标签</span></a></li><li><a href="/about" title="关于"><i class="iconfont icon-user"></i><span> 关于</span></a></li><li><a href="/link" title="关注"><i class="iconfont icon-link"></i><span> 关注</span></a></li><li><a href="/collection" title="收藏"><i class="iconfont icon-archive"></i><span> 收藏</span></a></li></ul></div><ul class="buttons"><li><a href="https://github.com/AngusFu/" rel="nofollow" target="_blank" class="inline"><i title="GitHub" class="iconfont icon-github-v"></i></a><!----><!----><a href="/atom.xml" target="_blank" class="inline"><i title="RSS" class="iconfont icon-rss-v"></i></a><a href="/search" class="inline"><i title="Search" class="iconfont icon-search"></i></a></li></ul></nav><div id="header"><div class="btn-bar"><i></i></div><h1><a href="/" class="nuxt-link-active">文蔺的博客</a></h1><a href="/about/" class="me"><img src="/imgs/avatar.jpg" alt="文蔺的博客"></a></div><div id="sidebar-mask" style="display:none;"></div><div id="main" class="main"><div id="page-post"><article class="post detail"><div class="meta"><div class="date">2016-07-12</div></div><h1 class="title">Node.js .sh scripts Manager</h1><div class="entry-content"><!----><h2 id="-">命令行也有苦恼</h2><p>不知身为前端er的你是不是还在使用 Windows 开发？反正我是。使用 Git？使用 npm scripts？好吧，命令行是少不了的吧？想必很多同学和我一样，使用 Git Bash 作为命令行终端吧。</p><p>可是每次都要敲，累不累？想想一次简单的 Git 提交需要几个步骤？</p><textarea width="0" height="0" class="pre-area" style="display:none;">&lt;code class=&quot;hljs lang-bash&quot;&gt;%24%20git%20add%20-A%0A%24%20git%20commit%20-m%20%3Cspan%20class%3D%22hljs-string%22%3E'commit'%3C%2Fspan%3E%0A%24%20git%20push&lt;/code&gt;</textarea><p>图简便的你可能会在 package.json 中这样配置：</p><textarea width="0" height="0" class="pre-area" style="display:none;">&lt;code class=&quot;hljs lang-javascript&quot;&gt;%7B%0A%20%20%20%20%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20...%3C%2Fspan%3E%0A%20%20%20%20%3Cspan%20class%3D%22hljs-string%22%3E%22scripts%22%3C%2Fspan%3E%3A%20%7B%0A%20%20%20%20%20%20%20%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20...%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%3Cspan%20class%3D%22hljs-string%22%3E%22push%22%3C%2Fspan%3E%3A%20%3Cspan%20class%3D%22hljs-string%22%3E%22git%20add%20-A%20%26amp%3B%26amp%3B%20git%20commit%20-m%20'commit'%20%26amp%3B%26amp%3B%20git%20push%22%3C%2Fspan%3E%0A%20%20%20%20%7D%0A%7D%0A%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20...%3C%2Fspan%3E&lt;/code&gt;</textarea><p>然后再敲 <textarea width="0" height="0" class="codespan" style="display:none;">npm run push</textarea>。啊啊心好累。</p><p>用过 <textarea width="0" height="0" class="codespan" style="display:none;">browser-sync cli</textarea> 吗？反正为了图简便，我是经常用的。敲过最变态的是下面这一行：</p><textarea width="0" height="0" class="pre-area" style="display:none;">&lt;code class=&quot;hljs lang-bash&quot;&gt;browser-sync%20start%20--server%20--files%20%3Cspan%20class%3D%22hljs-string%22%3E%22dist%2F*%22%3C%2Fspan%3E%5C%0A%20%20%20%20--index%20%3Cspan%20class%3D%22hljs-string%22%3E%22dist%2Findex.html%22%3C%2Fspan%3E%5C%0A%20%20%20%20--open%20%3Cspan%20class%3D%22hljs-string%22%3E%22external%22%3C%2Fspan%3E%5C%0A%20%20%20%20--reload-debounce%20--no-notify&lt;/code&gt;</textarea><h2 id="-bat-sh-">.bat/.sh 的故事</h2><p>敲过一次之后，发誓再也不这么玩了。索性在桌面保存了一个 <textarea width="0" height="0" class="codespan" style="display:none;">bs.bat</textarea> 文件，把上面的内容放进去。每次都从桌面 copy 到工作目录中去，双击完事。</p><p>后来玩 github 稍微勤了一些，commit、pull 的时候，命令行敲起来固然爽得不行，可是累啊。在上一家公司做 react-native 应用的时候，对 <textarea width="0" height="0" class="codespan" style="display:none;">react-native run start</textarea><textarea width="0" height="0" class="codespan" style="display:none;">cd android &amp;&amp; ./gradlew assembleRelease</textarea> 也是深恶痛绝。最后无不以 bat、sh文件收尾。</p><h2 id="nshm-">nshm 的由来</h2><p>前些时间接触到一个管理 <textarea width="0" height="0" class="codespan" style="display:none;">npm registry</textarea> 的 package，叫 <textarea width="0" height="0" class="codespan" style="display:none;">nrm</textarea>，用起来真是爽。<textarea width="0" height="0" class="codespan" style="display:none;">nrm use taobao</textarea><textarea width="0" height="0" class="codespan" style="display:none;">nrm add xx url</textarea>简单就能解决问题。这让我萌生一个想法：能不能不要每次都从桌面 copy 那些简单的脚本啊，来个简单的命令行自己把文件写目录不就 OK 了吗？</p><p>酝酿了一段时间。迟迟不肯动手。今天中午下楼抽烟，灵机一动，思路来了，花了半下午时间，边写边重构，最终做出来一个略嫌简陋但还能凑合用的工具，名之曰 “nshm”，取 “Node.js .sh scripts Manager” 的缩写，放在 Github 上了，<a href="https://github.com/AngusFu/nshm" target="_blank">https://github.com/AngusFu/nshm</a>。</p><p>使用起来很简单，看文档就行。</p><h2 id="-">安装</h2><textarea width="0" height="0" class="pre-area" style="display:none;">&lt;code class=&quot;hljs lang-bash&quot;&gt;%0A%24%20npm%20install%20nshm%20-g%0A%0A%24%20nshm%20%26lt%3B%3Cspan%20class%3D%22hljs-built_in%22%3Ecommand%3C%2Fspan%3E%26gt%3B%20%5Bargs...%5D&lt;/code&gt;</textarea><h2 id="-">添加一条自定义命令</h2><textarea width="0" height="0" class="pre-area" style="display:none;">&lt;code class=&quot;hljs lang-bash&quot;&gt;%24%20nshm%20add%20%26lt%3Bcommand_name%26gt%3B%20-%5Bt%7Cf%5D%20%5Btext%7Cpath%5D%0A%0A%3Cspan%20class%3D%22hljs-comment%22%3E%23%20add%20file%20content%3C%2Fspan%3E%0A%24%20nshm%20add%20commit%20--file%20.%2Fmy-commit.sh%0A%3Cspan%20class%3D%22hljs-comment%22%3E%23%20or%3C%2Fspan%3E%0A%24%20nshm%20add%20commit%20-f%20.%2Fmy-commit.sh%0A%0A%3Cspan%20class%3D%22hljs-comment%22%3E%23%20add%20text%20content%3C%2Fspan%3E%0A%24%20nshm%20add%20pull%20--text%20%3Cspan%20class%3D%22hljs-string%22%3E%22git%20pull%22%3C%2Fspan%3E%0A%3Cspan%20class%3D%22hljs-comment%22%3E%23%20or%3C%2Fspan%3E%0A%24%20nshm%20add%20pull%20-t%20%3Cspan%20class%3D%22hljs-string%22%3E%22git%20pull%22%3C%2Fspan%3E&lt;/code&gt;</textarea><h2 id="-">多个命令合并成一条命令</h2><textarea width="0" height="0" class="pre-area" style="display:none;">&lt;code class=&quot;hljs lang-bash&quot;&gt;%24%20nshm%20co%20%26lt%3Bcommand_name%26gt%3B%20%5B%3Cspan%20class%3D%22hljs-built_in%22%3Ecommand%3C%2Fspan%3E%7Ctext%5D%20%5B%3Cspan%20class%3D%22hljs-built_in%22%3Ecommand%3C%2Fspan%3E%7Ctext%5D%20%5B%3Cspan%20class%3D%22hljs-built_in%22%3Ecommand%3C%2Fspan%3E%7Ctext%5D%20%5B...%5D%0A%0A%24%20nshm%20co%20git%20commit%20pull%20%3Cspan%20class%3D%22hljs-string%22%3E%22git%20status%22%3C%2Fspan%3E&lt;/code&gt;</textarea><h2 id="-">删除缓存的命令</h2><textarea width="0" height="0" class="pre-area" style="display:none;">&lt;code class=&quot;hljs lang-bash&quot;&gt;%24%20nshm%20rm%20%26lt%3Bcommand_name%26gt%3B%20%26lt%3Bcommand_name%26gt%3B%20%26lt%3B...%26gt%3B%20%0A%0A%24%20nshm%20rm%20commit%20pull%20git&lt;/code&gt;</textarea><h2 id="-">清除所有缓存的命令</h2><textarea width="0" height="0" class="pre-area" style="display:none;">&lt;code class=&quot;hljs lang-bash&quot;&gt;%24%20nshm%20clean&lt;/code&gt;</textarea><h2 id="-">列出现有的命令</h2><textarea width="0" height="0" class="pre-area" style="display:none;">&lt;code class=&quot;hljs lang-bash&quot;&gt;%3Cspan%20class%3D%22hljs-comment%22%3E%23%20view%20all%20names%3C%2Fspan%3E%0A%24%20nshm%20ls%0A%0A%3Cspan%20class%3D%22hljs-comment%22%3E%23%20view%20all%20details%3C%2Fspan%3E%0A%24%20nshm%20ls%20-a&lt;/code&gt;</textarea><h2 id="example-01">Example 01</h2><textarea width="0" height="0" class="pre-area" style="display:none;">&lt;code class=&quot;hljs lang-bash&quot;&gt;%24%20nshm%20add%20add%20-t%20%3Cspan%20class%3D%22hljs-string%22%3E%22git%20add%20-A%22%3C%2Fspan%3E%0A%24%20nshm%20add%20commit%20-t%20%3Cspan%20class%3D%22hljs-string%22%3E%22git%20commit%20-m%20'push'%22%3C%2Fspan%3E%0A%24%20nshm%20add%20pull%20-t%20%3Cspan%20class%3D%22hljs-string%22%3E%22git%20push%22%3C%2Fspan%3E%0A%0A%24%20nshm%20co%20git%20add%20commit%20pull%0A%0A%3Cspan%20class%3D%22hljs-comment%22%3E%23%20init%20my%20directory%3C%2Fspan%3E%0A%3Cspan%20class%3D%22hljs-comment%22%3E%23%20then%20we'll%20get%20%60add.sh%60%20%60commit.sh%60%20%60pull.sh%60%3C%2Fspan%3E%0A%24%20nshm%20git&lt;/code&gt;</textarea><h2 id="example-02">Example 02</h2><textarea width="0" height="0" class="pre-area" style="display:none;">&lt;code class=&quot;hljs lang-bash&quot;&gt;%3Cspan%20class%3D%22hljs-comment%22%3E%23%20browserSync%20cli%20%3C%2Fspan%3E%0A%3Cspan%20class%3D%22hljs-comment%22%3E%23%20here%20we%20use%20%60%24%7B%7D%60%20as%20placeholders%3C%2Fspan%3E%0A%3Cspan%20class%3D%22hljs-comment%22%3E%23%20for%20necessary%20params%3C%2Fspan%3E%0A%24%20nshm%20add%20bs%20-t%20%3Cspan%20class%3D%22hljs-string%22%3E%22browser-sync%20start%20--server%20--files%20%5C%22%3Cspan%20class%3D%22hljs-variable%22%3E%24%7Bfiles%7D%3C%2Fspan%3E%5C%22%20--index%20%5C%22%3Cspan%20class%3D%22hljs-variable%22%3E%24%7Bindex%7D%3C%2Fspan%3E%5C%22%20--open%20%5C%22external%5C%22%20--reload-debounce%20--no-notify%22%3C%2Fspan%3E%0A%0A%3Cspan%20class%3D%22hljs-comment%22%3E%23%20now%20we%20get%20the%20%60bs.sh%60%20file%20under%20our%20working%20directory%3C%2Fspan%3E%0A%24%20nshm%20bs%20--file%20%3Cspan%20class%3D%22hljs-string%22%3E'**'%3C%2Fspan%3E%20--index%20%3Cspan%20class%3D%22hljs-string%22%3E'index.html'%3C%2Fspan%3E&lt;/code&gt;</textarea><h2 id="-">结尾</h2><p>工具默认自带了 Git 相关的 <textarea width="0" height="0" class="codespan" style="display:none;">commit</textarea><textarea width="0" height="0" class="codespan" style="display:none;">pull</textarea> 及集成两者的 <textarea width="0" height="0" class="codespan" style="display:none;">git</textarea> 命令，还有上面提到的 <textarea width="0" height="0" class="codespan" style="display:none;">browser-sync</textarea> 的命令（简称作<textarea width="0" height="0" class="codespan" style="display:none;">bs</textarea>）。也可以使用 <textarea width="0" height="0" class="codespan" style="display:none;">nshm add</textarea> 的形式自己添加。</p><p>微不足道的工具，自娱自乐一下，虽然显得 low 了点，也能解决自己的一点问题。</p><p>That's all。</p><p>PS: 今晚开始看 WebRTC 的内容，小有收获，学习的生活捡起来！</p></div></article><nav class="pagination"><a href="/post/backdoor-service-worker" title="[译] 给 Service Worker 开后门" class="prev">« [译] 给 Service Worker 开后门</a><a href="/post/todo-api-with-unit-test" title="[译] 测试驱动开发：使用 Node.js 和 MongoDB 构建 Todo API" class="next">[译] 测试驱动开发：使用 Node.js 和 MongoDB 构建 Todo API »</a></nav><div></div></div><footer id="footer" class="inner">
      © 2018 -  文蔺的博客
      <span> - </span><a href="/" class="nuxt-link-active">www.wemlion.com</a><br>
      Powered by <a target="_blank" href="https://nuxtjs.org">Nuxt.js</a> &amp; <a target="_blank" rel="nofollow" href="https://firekylin.org" class="external">FireKylin</a></footer></div></div></div></div><script type="text/javascript">window.__NUXT__={"layout":"default","data":[{}],"error":null,"serverRendered":true};</script><script src="/static/manifest.4f625a5f.js" defer></script><script src="/static/0-cf2867bf.js" defer></script><script src="/static/91-13a7ee83.js" defer></script><script src="/static/common.d774ec7b.js" defer></script><script src="/static/app.ff62209b.js" defer></script>
  </body>
</html>

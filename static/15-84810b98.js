webpackJsonp([15],{"2AzW":function(s,a,n){"use strict";var t=function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("div",{attrs:{id:"page-post"}},[n("article",{staticClass:"post detail"},[n("div",{staticClass:"meta"},[n("div",{staticClass:"date"},[s._v(s._s(s.post.create_time))])]),n("h1",{staticClass:"title"},[s._v(s._s(s.post.title))]),n("div",{staticClass:"entry-content"},[s.post.translation?n("blockquote",[n("p",{staticStyle:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[s._v("\n        原文作者: "),n("a",{attrs:{href:s.post.translation.social,target:"_blank"}},[s._v(s._s(s.post.translation.author))]),n("br"),s._v("\n        原文地址: "),n("a",{attrs:{href:s.post.translation.from}},[s._v(s._s(s.post.translation.from))]),n("br"),s._v("\n        译文地址: "),n("a",{attrs:{href:s.post_url}},[s._v(s._s(s.post_url))]),n("br"),s._v("\n        本文由 "),n("a",{attrs:{href:this.$config.site_url}},[s._v(s._s(this.$config.site_owner))]),s._v(" 翻译，转载请保留此声明。"),n("br"),s._v("\n        著作权属于原作者，本译文仅用于学习、研究和交流目的，请勿用于商业目的。\n        ")])]):s._e(),n("h2",{attrs:{id:"-"}},[s._v("方法一：计数比较")]),n("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"pre-area",attrs:{width:"0",height:"0"}},[s._v("<code class=\"hljs lang-javascript\">%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%20%3Cspan%20class%3D%22hljs-title%22%3EloadImg%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-params%22%3Eurl%2C%20cb%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E%20img%20%3D%20%3Cspan%20class%3D%22hljs-keyword%22%3Enew%3C%2Fspan%3E%20Image()%3B%0A%20%20%20%20img.src%20%3D%20url%3B%0A%20%20%20%20img.onload%20%3D%20cb%3B%0A%7D%0A%0A%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%20%3Cspan%20class%3D%22hljs-title%22%3EloadImages%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-params%22%3EurlArr%2C%20afterAllLoadedFunc%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E%20count%20%3D%20urlArr.length%3B%0A%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E%20loadedCount%20%3D%20%3Cspan%20class%3D%22hljs-number%22%3E0%3C%2Fspan%3E%3B%0A%0A%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Efor%3C%2Fspan%3E%20(%3Cspan%20class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E%20i%20%3D%20count%20-%20%3Cspan%20class%3D%22hljs-number%22%3E1%3C%2Fspan%3E%3B%20i%20%26gt%3B%3D%20%3Cspan%20class%3D%22hljs-number%22%3E0%3C%2Fspan%3E%3B%20i--)%20%7B%0A%20%20%20%20%20%20%20%20loadImg(urlArr%5Bi%5D%2C%20%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%20(%3Cspan%20class%3D%22hljs-params%22%3E%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20loadedCount%20%2B%3D%20%3Cspan%20class%3D%22hljs-number%22%3E1%3C%2Fspan%3E%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E%20(count%20%3D%3D%3D%20loadedCount)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20afterAllLoadedFunc()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%7D%0A%0AloadImages(%5B%3Cspan%20class%3D%22hljs-string%22%3E'.%2Fxx.jpg'%3C%2Fspan%3E%2C%20%3Cspan%20class%3D%22hljs-string%22%3E'.%2Fyy.jpg'%3C%2Fspan%3E%2C%20%3Cspan%20class%3D%22hljs-string%22%3E'.%2Fzz.jpg'%3C%2Fspan%3E%5D%2C%20%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%20(%3Cspan%20class%3D%22hljs-params%22%3E%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20alert(%3Cspan%20class%3D%22hljs-string%22%3E'all%20imgs%20have%20been%20loaded'%3C%2Fspan%3E)%3B%0A%7D)%3B</code>")]),n("h2",{attrs:{id:"-promise"}},[s._v("方法二：Promise")]),n("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"pre-area",attrs:{width:"0",height:"0"}},[s._v("<code class=\"hljs lang-javascript\">%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20%E4%BD%BF%E7%94%A8%20Promise%3C%2Fspan%3E%0A%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20%E5%85%BC%E5%AE%B9%E7%9A%84%E8%AF%9D%E9%9C%80%E8%A6%81%E5%BC%95%E5%85%A5%20es6-promise%20%E5%BA%93%3C%2Fspan%3E%0A%0A%3Cspan%20class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E%20loadImg%20%3D%20%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%20(%3Cspan%20class%3D%22hljs-params%22%3Eurl%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Ereturn%3C%2Fspan%3E%20%3Cspan%20class%3D%22hljs-keyword%22%3Enew%3C%2Fspan%3E%20%3Cspan%20class%3D%22hljs-built_in%22%3EPromise%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%20(%3Cspan%20class%3D%22hljs-params%22%3Eresolve%2C%20reject%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E%20img%20%3D%20%3Cspan%20class%3D%22hljs-keyword%22%3Enew%3C%2Fspan%3E%20Image()%3B%0A%20%20%20%20%20%20%20%20img.src%20%3D%20url%3B%0A%20%20%20%20%20%20%20%20img.onload%20%3D%20%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%20(%3Cspan%20class%3D%22hljs-params%22%3E%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20resolve()%20%20%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20img.onerror%20%3D%20%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%20(%3Cspan%20class%3D%22hljs-params%22%3E%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20reject()%20%20%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D)%3B%0A%7D%3B%0A%0A%3Cspan%20class%3D%22hljs-built_in%22%3EPromise%3C%2Fspan%3E.all(%5B%0A%20%20%20%20loadImg(%3Cspan%20class%3D%22hljs-string%22%3E'xxx.jpg'%3C%2Fspan%3E)%2C%0A%20%20%20%20loadImg(%3Cspan%20class%3D%22hljs-string%22%3E'yyy.jpg'%3C%2Fspan%3E)%2C%0A%20%20%20%20loadImg(%3Cspan%20class%3D%22hljs-string%22%3E'zzz.jpg'%3C%2Fspan%3E)%2C%0A%5D).then(%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%20(%3Cspan%20class%3D%22hljs-params%22%3E%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20alert(%3Cspan%20class%3D%22hljs-string%22%3E'all%20images%20are%20loaded!'%3C%2Fspan%3E)%0A%7D)%3B</code>")]),n("h2",{attrs:{id:"-deferred"}},[s._v("方法三：$.Deferred")]),n("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"pre-area",attrs:{width:"0",height:"0"}},[s._v("<code class=\"hljs lang-javascript\">%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20%E5%A6%82%E6%9E%9C%E6%9C%89jquery%3C%2Fspan%3E%0A%3Cspan%20class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E%20loadImg%20%3D%20%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%20(%3Cspan%20class%3D%22hljs-params%22%3Eurl%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E%20defer%20%3D%20%24.Deferred()%3B%0A%0A%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E%20img%20%3D%20%3Cspan%20class%3D%22hljs-keyword%22%3Enew%3C%2Fspan%3E%20Image()%3B%0A%20%20%20%20img.src%20%3D%20url%3B%0A%20%20%20%20img.onload%20%3D%20%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%20(%3Cspan%20class%3D%22hljs-params%22%3E%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20%20%20%20%20defer.resolve()%20%20%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20img.onerror%20%3D%20%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%20(%3Cspan%20class%3D%22hljs-params%22%3E%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20%20%20%20%20defer.reject()%20%20%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Ereturn%3C%2Fspan%3E%20defer.promise()%3B%0A%7D%3B%0A%0A%24.when(loadImg(%3Cspan%20class%3D%22hljs-string%22%3E'xx.jpg'%3C%2Fspan%3E)%2C%20loadImg(%3Cspan%20class%3D%22hljs-string%22%3E'yy.jpg'%3C%2Fspan%3E)%2C%20loadImg(%3Cspan%20class%3D%22hljs-string%22%3E'zz.jpg'%3C%2Fspan%3E)).done(%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%20(%3Cspan%20class%3D%22hljs-params%22%3E%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20alert(%3Cspan%20class%3D%22hljs-string%22%3E'all%20images%20are%20loaded!'%3C%2Fspan%3E)%0A%7D)%3B</code>")]),s._m(0)])]),s.post.prev.title||s.post.next.title?n("nav",{staticClass:"pagination"},[s.post.prev.title?n("nuxt-link",{staticClass:"prev",attrs:{to:"/post/"+s.post.prev.pathname,title:s.post.prev.title}},[s._v("« "+s._s(s.post.prev.title))]):s._e(),s.post.next.title?n("nuxt-link",{staticClass:"next",attrs:{to:"/post/"+s.post.next.pathname,title:s.post.next.title}},[s._v(s._s(s.post.next.title)+" »")]):s._e()],1):s._e(),n("gitalk",{attrs:{tags:s.tags}})],1)};t._withStripped=!0;var e={render:t,staticRenderFns:[function(){var s=this.$createElement,a=this._self._c||s;return a("p",[this._v("更多请参考 "),a("a",{attrs:{href:"http://angusfu.github.io/slides/promise/",target:"_blank"}},[this._v("http://angusfu.github.io/slides/promise/")])])}]};a.a=e},"3sZ/":function(s,a,n){"use strict";var t={title:"判断资源并行加载完成的三种办法：计数、Promise及 $.Deferred",description:"判断资源并行加载完成的三种办法：计数、Promise及 $.Deferred",keywords:"原创,开发心得,JavaScript,Promise",pathname:"when-are-all-resources-all-loaded",translation:null,create_time:"2016-07-04",prev:{title:"[译] 测试驱动开发：使用 Node.js 和 MongoDB 构建 Todo API",pathname:"todo-api-with-unit-test"},next:{title:"使用 ava 和 jsdom 测试前端界面",pathname:"test-with-ava-jsdom"}};a.a={head:function(){return{title:t.title,meta:[{name:"keywords",content:t.keywords||""},{name:"description",content:t.description}]}},data:function(){return{post:t,post_url:this.$config.site_url+"/post/"+t.pathname,tags:t.tags}},mounted:function(){this.$fixCode()}}},cQzY:function(s,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=n("3sZ/"),e=n("2AzW"),l=n("VU/8")(t.a,e.a,!1,null,null,null);l.options.__file="pages/post/when-are-all-resources-all-loaded.vue",a.default=l.exports}});
webpackJsonp([19],{"40Bu":function(t,e,i){"use strict";var l={title:"笔记：velocity 2016 第一天",description:"velocity 2016 笔记",keywords:"原创,笔记",pathname:"velocity-2016-note-1",translation:null,create_time:"2016-12-01",prev:{title:"笔记：velocity 2016 第二天",pathname:"velocity-2016-day-2"},next:{title:"[译] CSS 方法论的选择",pathname:"when-to-use-which-css-methodology"}};e.a={head:function(){return{title:l.title,meta:[{name:"keywords",content:l.keywords||""},{name:"description",content:l.description}]}},data:function(){return{post:l,post_url:this.$config.site_url+"/post/"+l.pathname,tags:l.tags}},mounted:function(){this.$fixCode()}}},LgvL:function(t,e,i){"use strict";var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"page-post"}},[i("article",{staticClass:"post detail"},[i("div",{staticClass:"meta"},[i("div",{staticClass:"date"},[t._v(t._s(t.post.create_time))])]),i("h1",{staticClass:"title"},[t._v(t._s(t.post.title))]),i("div",{staticClass:"entry-content"},[t.post.translation?i("blockquote",[i("p",{staticStyle:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[t._v("\n        原文作者: "),i("a",{attrs:{href:t.post.translation.social,target:"_blank"}},[t._v(t._s(t.post.translation.author))]),i("br"),t._v("\n        原文地址: "),i("a",{attrs:{href:t.post.translation.from}},[t._v(t._s(t.post.translation.from))]),i("br"),t._v("\n        译文地址: "),i("a",{attrs:{href:t.post_url}},[t._v(t._s(t.post_url))]),i("br"),t._v("\n        本文由 "),i("a",{attrs:{href:this.$config.site_url}},[t._v(t._s(this.$config.site_owner))]),t._v(" 翻译，转载请保留此声明。"),i("br"),t._v("\n        著作权属于原作者，本译文仅用于学习、研究和交流目的，请勿用于商业目的。\n        ")])]):t._e(),t._m(0),i("h2",{attrs:{id:"usetheplatform-web-"}},[t._v("UseThePlatform —— Web 组件介绍")]),i("blockquote",[i("p",[t._v("分析者：来自 Youtube 的 Mikhail Sychev")]),i("p",[t._v("感觉就是对 Polymer 和 Web Components 的科普。期待明天更详细的分享。")]),i("p",[t._v("其实关于 Polymer，打开 Chrome 的 "),i("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[t._v("chrome://downloads/")]),t._v(" 查看源码，就能学到不少东西：CSS 变量、Shadow DOM、Polymer 等等。之前打算就这个写篇博客，一直没动手。")])]),i("p",[t._v("(略….)")]),i("hr"),i("h2",{attrs:{id:"-"}},[t._v("搜索引擎性能优化的未来 —— 搜索极速浏览框架")]),t._m(1),i("h3",{attrs:{id:"-"}},[t._v("全流程优化")]),t._m(2),i("h3",{attrs:{id:"-"}},[t._v("框架解决问题")]),t._m(3),i("h3",{attrs:{id:"-"}},[t._v("感知交互时间")]),i("p",[t._v("点击搜索结果 => 页面响应")]),i("h3",{attrs:{id:"-"}},[t._v("加速原理")]),i("h4",{attrs:{id:"-"}},[t._v("传统页面")]),i("p",[t._v("点击。连接。响应。基础渲染。内容渲染。组件加载。")]),i("h4",{attrs:{id:"-"}},[t._v("加速")]),i("p",[t._v("点击 ")]),i("p",[t._v("​    A => 交互响应。基础渲染。。。。")]),i("p",[t._v("​        B => 连接。响应。 。。。")]),i("p",[t._v("。。。。内容渲染、组件加载")]),i("h2",{attrs:{id:"-"}},[t._v("应用性能数据可视化")]),t._m(4),i("h3",{attrs:{id:"-"}},[t._v("前面")]),t._m(5),i("h3",{attrs:{id:"-"}},[t._v("可视化是一个编码过程")]),t._m(6),i("h3",{attrs:{id:"-1s"}},[t._v("请求理想时间小于 1s")]),t._m(7),i("hr"),i("h2",{attrs:{id:"hulu-react-redux-"}},[t._v("Hulu 的 React / Redux 构架实践")]),t._m(8),i("h3",{attrs:{id:"challenges"}},[t._v("Challenges")]),t._m(9),i("h3",{attrs:{id:"tech-stack"}},[t._v("Tech Stack")]),t._m(10),t._m(11),i("h3",{attrs:{id:"other-notes"}},[t._v("Other Notes")]),i("ul",[i("li",[i("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[t._v("React APP = Keep Rndering")])]),i("li",[i("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[t._v("UI = f(state)")])]),i("li",[t._v("Constraints vs Conventions")])]),i("hr"),i("h2",{attrs:{id:"-react-native-"}},[t._v("数亿级用户规模下的 React Native 应用实践")]),t._m(12),i("h3",{attrs:{id:"-"}},[t._v("手机百度")]),t._m(13),i("h3",{attrs:{id:"rn-"}},[t._v("RN 工程实践")]),t._m(14),i("h3",{attrs:{id:"q-a"}},[t._v("Q&A")]),t._m(15),i("hr"),i("h2",{attrs:{id:"-weex-"}},[t._v("双十一 Weex 会场极致性能优化")]),t._m(16),i("ul",[i("li",[i("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[t._v("f(HTML/CSS/JS) = Native UI")])]),i("li",[t._v("DSL(HTML/CSS/JS) -> Virtual DOM -> Renderer -> UI")]),i("li",[t._v("Transformer: DSL -> JS Bundle")]),t._m(17),t._m(18)]),i("h3",{attrs:{id:"-"}},[t._v("优化")]),t._m(19),i("h3",{attrs:{id:"-"}},[t._v("性能优化指标")]),t._m(20),i("h3",{attrs:{id:"-"}},[t._v("实战部分")]),t._m(21)])]),t.post.prev.title||t.post.next.title?i("nav",{staticClass:"pagination"},[t.post.prev.title?i("nuxt-link",{staticClass:"prev",attrs:{to:"/post/"+t.post.prev.pathname,title:t.post.prev.title}},[t._v("« "+t._s(t.post.prev.title))]):t._e(),t.post.next.title?i("nuxt-link",{staticClass:"next",attrs:{to:"/post/"+t.post.next.pathname,title:t.post.next.title}},[t._v(t._s(t.post.next.title)+" »")]):t._e()],1):t._e(),i("gitalk",{attrs:{tags:t.tags}})],1)};l._withStripped=!0;var s={render:l,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("有幸得到老大给的 Velocity 大会门票，屁颠屁颠跑去听分享。下面是今天（第一天）的笔记。记得比较简略，凑合看吧。"),e("a",{attrs:{href:"http://velocity.oreilly.com.cn/2016/index.php?func=slidesvideos",target:"_blank"}},[this._v("PPT 下载通道")]),this._v("已经放出来了，感兴趣的可以自己跟踪一下。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("分享者：来自百度的陶清乾")]),e("p",[this._v("听到最后才发现，原来是搞了套自己的后端工具，你“打开”的页面，可能只是百度缓存、处理过的。（免责声明：理解可能有偏差）还提了下使用的 工具 MIP。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("展现交互")]),e("li",[this._v("加载策略")]),e("li",[this._v("页面渲染")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("创建容器视图，提升交互体验")]),e("li",[this._v("异步加载渲染，提升页面渲染速度")]),e("li",[this._v("prefetch 实例，优化网络、服务开销")]),e("li",[this._v("优化机制，优化细粒度模块速度")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("分享者：来自 mmTrix 的朱建锋")]),e("p",[this._v("先是对可视化、性能等做了一些介绍，之后讲数据处理，科普了几种平均数，之后科普了各种常用的图（如雷达图、南丁格尔玫瑰图 etc.）。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("尽量使用抗干扰性更好的方法计算性能数据")]),e("li",[this._v("标准差衡量性能标准")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("基本的简单的图。")]),e("li",[this._v("目的：表达数据。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("DNS: 50ms")]),e("li",[this._v("TCP shakes: 100ms")]),e("li",[this._v("SSL(https): 300ms")]),e("li",[this._v("Waiting for Response: 250ms（网络请求 => First Byte）")]),e("li",[this._v("接收 Data: 300ms")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("分享者：来自“美国的爱奇艺” Hulu 的程墨")]),e("p",[this._v("较基础，但对于 Constraints vs Conventions 相关的内容非常不错，很值得思考。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("System Complexity"),e("ul",[e("li",[this._v("Legacy code in jQuery & Backbone")]),e("li",[this._v("UI non-predictable")]),e("li",[this._v("Lack of component isolation")])])]),e("li",[this._v("Performance Bottleneck"),e("ul",[e("li",[this._v("Initial AJAX roundtrip")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("strong",[this._v("Before")]),this._v(": jQuery + Backbone + Ruby on Rails")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("strong",[this._v("After")]),this._v(": React + Redux + Node & Express")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("分享者：来自百度的雷志兴")]),e("p",[this._v("做过一段时间的 RN，所以基本能听懂。")]),e("p",[this._v("其他的内容，个人感觉可算干货满满。没提到热更新。")]),e("p",[this._v("结合此前 58 同城 RN、携程 RN 等文章一起看，会更好的哈哈")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[t._v("迭代周期： 4周")]),i("li",[t._v("主要 features：数十个")]),i("li",[t._v("开发工时：数千人时")]),i("li",[t._v("跨部门，沟通成本高")]),i("li",[t._v("业务种类多，集成成本高")]),i("li",[t._v("过去的解耦方案"),i("ul",[i("li",[t._v("APK 插件 / SDK")]),i("li",[t._v("Hybrid")])])]),i("li",[t._v("迭代速度：native 的 5-8 倍")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[t._v("与现有业务融合"),i("ul",[i("li",[t._v("Android 4.1 以上")]),i("li",[t._v("v0.32 以上不支持 iOS 7")]),i("li",[i("strong",[t._v("降级兼容")]),t._v("：随时回撤；AB Test")]),i("li",[i("strong",[t._v("性能方面")]),t._v(": 空间换时间，便利性换性能；减少重绘，减少通讯")]),i("li",[t._v("统一交互协议：RN 和 Native 相互之间的调用")])])]),i("li",[t._v("融入迭代流程"),i("ul",[i("li",[t._v("首先，前提是业务方明确提出 RN 产品需求，明确哪些能够做到")]),i("li",[t._v("容灾方案：报错率较高怎么办？")]),i("li",[t._v("开发")]),i("li",[t._v("发布：打包、测试后由 PM 从平台发布")]),i("li",[i("strong",[t._v("监控")]),t._v("：一定要能够监控到 RN 层，尤其是 js 层的报错信息（Note：坑！！！！！！！！）")])])]),i("li",[t._v("性能优化"),i("ul",[i("li",[t._v("通讯频繁 by design： js 足够的灵活性")]),i("li",[t._v("易导致卡顿"),i("ul",[i("li",[t._v("事件频率高")]),i("li",[t._v("js 运行时间长")]),i("li",[t._v("UI 绘制频繁")])])]),i("li",[t._v("初始化成本高"),i("ul",[i("li",[t._v("生成模块配置表")])])]),i("li",[t._v("ListView 优化"),i("ul",[i("li",[t._v("View 无法复用，内存紧张")]),i("li",[t._v("DOM diff： 大量重新渲染")]),i("li",[t._v("业务层优化：预留空白单元；大量内容时重新渲染")]),i("li",[i("strong",[t._v("解决 1")]),t._v("：删除非可视区 View")]),i("li",[i("strong",[t._v("解决 2")]),t._v("：模板复用（item 可能跳动、闪烁）")]),i("li",[t._v("建议：产品进行限制，超过一定数量时重新刷新")])])]),i("li",[t._v("动画"),i("ul",[i("li",[t._v("16ms，容易丢帧")]),i("li",[t._v("实验特性 userNativeDriver: true —— 将动画数据算好全部发给 Native，减少通讯")])])]),i("li",[t._v("启动速度优化"),i("ul",[i("li",[t._v("预初始化：APP 启动后，立即 instance Init，用户点击的时候，就可以直接开始 js 业务")]),i("li",[t._v("首页业务多，instance 初始化过多，开销太大。")]),i("li",[t._v("单 Instance 多业务：Component 方法加载业务，无法使用 global")]),i("li",[t._v("按需加载：公用部分在初始化时加载，业务部分在交互时才开始加载")])])]),i("li",[t._v("延迟加载、渲染")])])]),i("li",[t._v("跨端方案对比"),i("ul",[i("li",[t._v("RN 适用场景"),i("ul",[i("li",[t._v("超级 APP")]),i("li",[t._v("体验平台级 APP")])])]),i("li",[t._v("Hybrid：...")]),i("li",[t._v("APK 插件：...")])])]),i("li",[t._v("Summary"),i("ul",[i("li",[t._v("发版周期、开发成本和使用体验之间找到平衡")]),i("li",[t._v("系统性工程：有机融入 APP")]),i("li",[t._v("...")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("h5 和 RN 迭代的问题：两端齐头并进，各自开发")]),e("li",[this._v("Native Module 问题上报：....")]),e("li",[this._v("非结构化 ListView 优化：RN 做的话，很难解决，结构样式尽量简单一些")]),e("li",[this._v("RN 版本升级应对：RN 的 持续交付。。。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("分享者：阿里的冯成晓、周婷婷")]),e("p",[this._v("终于面对面接触到 Weex 分享了。很久之前逢阿里面试官必问 Weex，想必他们烦极了。")]),e("p",[this._v("和百度同学关于 RN 的分享两场一起听下来，真的收获多多。")]),e("p",[this._v("印象非常好的一点是，分享过程中，反复提到 W3C 标准，提到希望补齐和 W3C 性能优化相关的 feature。这种思路应该是非常棒的。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[this._v("JSFramework: DOM Tree"),e("ul",[e("li",[this._v("模板编译，数据绑定")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",[t._v("Render：参照 Webkit"),i("ul",[i("li",[t._v("Build Tree")]),i("li",[t._v("Compute Style")]),i("li",[t._v("CSS Layout  (… Reflow, Relayout)")]),i("li",[t._v("Create View")]),i("li",[t._v("Update Frame")]),i("li",[t._v("Set View Props (… RePaint)")]),i("li",[t._v("Native View")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("下载 js： 预加载")]),e("li",[this._v("执行 js：单 context 共享")]),e("li",[this._v("解析 DOM： Node & Tree 解析结合")]),e("li",[this._v("渲染 UI： List & 异步渲染（内存复用，只会渲染可见部分）")]),e("li",[this._v("全局污染治理 + JSCore 内存管理")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("秒开率：加载时间+首屏时间 < 1s"),e("ul",[e("li",[this._v("加载时间：js bundle 加载时间")]),e("li",[this._v("...")])])]),e("li",[this._v("Weex 会场页面数：1700+，占比 99.6%")]),e("li",[this._v("主会场 FPS：低端机 53， 高端机58")]),e("li",[this._v("动画、视频、直播、全景图都是 Weex")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[t._v("列表过长，WebView 内存不好控制，容易 crash ")]),i("li",[t._v("加载 js bundle：本地 IO 最快"),i("ul",[i("li",[t._v("APP 启动，预先下载 js")]),i("li",[t._v("长连接通道 Push")]),i("li",[t._v("全量/增量，被动/强制更新结合")])])]),i("li",[t._v("预加载使用策略"),i("ul",[i("li",[t._v("根据业务特性斟酌")]),i("li",[t._v("1700 个页面，由相同模板自由组合变成的")]),i("li",[t._v("模块化，小粒度缓存")]),i("li",[t._v("原来：1600 * 55 = 93 M")]),i("li",[t._v("模块 + 配置：1700 "),i("em",[t._v(" 5 + 30 ")]),t._v(" 10 = 8.8 M")]),i("li",[t._v("但是模块 +配置这样的秒开率低了 10%")]),i("li",[t._v("业务个性化预加载，根据进入场景下载：类似 "),i("link",{attrs:{preload:""}})]),i("li",[t._v("preload & prerender："),i("ul",[i("li",[t._v("dns-prefetch")]),i("li",[t._v("preconnect（DNS + TCP connect）")]),i("li",[t._v("prefetch")]),i("li",[t._v("subresources（depreciated）")]),i("li",[t._v("preload")]),i("li",[t._v("prerender")])])])])]),i("li",[t._v("js 执行"),i("ul",[i("li",[t._v("安卓下 V8 解析 js 耗时")]),i("li",[t._v("减少 bundle size：去重，分离，通用组件内置")]),i("li",[t._v("减少 VDOM 更新"),i("ul",[i("li",[t._v("shouldComponentUpdate")]),i("li",[t._v("pureRenderMixin")])])])])]),i("li",[t._v("动态数据并行预加载"),i("ul",[i("li",[t._v("点击时直接请求，然后存储在 storage 中（文蔺注：这块儿好像可以参考手机 QQ 家校 or 兴趣部落 React 的优化的文章）")]),i("li",[t._v("storage LRU 策略")]),i("li",[t._v("首屏数据请求参数不固定？。。。")]),i("li",[t._v("jsbundle 走本地，效果如何？。。。")]),i("li",[t._v("优化效果 80% 以上")])])]),i("li",[t._v("首屏 UI 渲染"),i("ul",[i("li",[t._v("使用 list 代替 scroller")]),i("li",[t._v("尽量减少布局嵌套")]),i("li",[t._v("首屏以外的模板延迟初始化")]),i("li",[t._v("新方案：requestIdleCallback")])])]),i("li",[t._v("最佳实践"),i("ul",[i("li",[t._v("尽量 prefetch")]),i("li",[t._v("use list")]),i("li",[t._v("cell 细粒度拆分")]),i("li",[t._v("减少首次加载内容")]),i("li",[t._v("减少 js 大小")])])]),i("li",[t._v("工具"),i("ul",[i("li",[t._v("Xcode simulator")]),i("li",[t._v("Safari 10 Remote Inspector")])])]),i("li",[t._v("性能指标优化流程（图）"),i("ul",[i("li",[t._v("发布基线")]),i("li",[t._v("预发检测")]),i("li",[t._v("线上监控")]),i("li",[t._v("生成报表 <=== 业务达标基线")]),i("li",[t._v("问题分析")]),i("li",[t._v("开发修复")]),i("li",[t._v("预发检测")]),i("li",[t._v("。。。。")])])]),i("li",[t._v("Week 下一阶段"),i("ul",[i("li",[t._v("W3C 性能优化 feature 补齐")]),i("li",[t._v("性能 profile")]),i("li",[t._v("完整开发模式")]),i("li",[t._v("更丰富的交互体验")]),i("li",[t._v("更丰富的 module 和 component")])])])])}]};e.a=s},OhmN:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=i("40Bu"),s=i("LgvL"),_=i("VU/8")(l.a,s.a,!1,null,null,null);_.options.__file="pages/post/velocity-2016-note-1.vue",e.default=_.exports}});
webpackJsonp([28],{EPI1:function(s,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=a("cSGb"),n=a("JoUJ"),r=a("VU/8")(t.a,n.a,!1,null,null,null);r.options.__file="pages/post/the-service-worker-lifecycle.vue",e.default=r.exports},JoUJ:function(s,e,a){"use strict";var t=function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("div",{attrs:{id:"page-post"}},[a("article",{staticClass:"post detail"},[a("div",{staticClass:"meta"},[a("div",{staticClass:"date"},[s._v(s._s(s.post.create_time))])]),a("h1",{staticClass:"title"},[s._v(s._s(s.post.title))]),a("div",{staticClass:"entry-content"},[s.post.translation?a("blockquote",[a("p",{staticStyle:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[s._v("\n        原文作者: "),a("a",{attrs:{href:s.post.translation.social,target:"_blank"}},[s._v(s._s(s.post.translation.author))]),a("br"),s._v("\n        原文地址: "),a("a",{attrs:{href:s.post.translation.from}},[s._v(s._s(s.post.translation.from))]),a("br"),s._v("\n        译文地址: "),a("a",{attrs:{href:s.post_url}},[s._v(s._s(s.post_url))]),a("br"),s._v("\n        本文由 "),a("a",{attrs:{href:this.$config.site_url}},[s._v(s._s(this.$config.site_owner))]),s._v(" 翻译，转载请保留此声明。"),a("br"),s._v("\n        著作权属于原作者，本译文仅用于学习、研究和交流目的，请勿用于商业目的。\n        ")])]):s._e(),a("p",[s._v("如果使用过 Service Worker，之前你可能遇到过这样的问题，原来的 Service Worker 还在起作用，即使文件本身已经更新过。其中的原因在于 Service Worker 生命周期中的一些微妙之处；它可能会被安装，而且是有效的，但实际上却没有被 document 纳入控制。")]),s._m(0),a("p",[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://p.ssl.qhimg.com/t01716a20bbd762eaba.png",expression:"`https://p.ssl.qhimg.com/t01716a20bbd762eaba.png`"}],attrs:{alt:"Service Worker 状态"}})]),a("h2",{attrs:{id:"-parsed-"}},[s._v("解析成功（Parsed）")]),a("p",[s._v("首次注册 Service Worker 时，浏览器解决脚本并获得入口点。如果解析成功（而且满足其他条件，如 HTTPS 协议），就可以访问到 Service Worker 注册对象（registration object），其中包含 Service Worker 的状态及其作用域。")]),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"pre-area",attrs:{width:"0",height:"0"}},[s._v("<code class=\"hljs lang-javascript\">%3Cspan%20class%3D%22hljs-comment%22%3E%2F*%20In%20main.js%20*%2F%3C%2Fspan%3E%0A%3Cspan%20class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E%20(%3Cspan%20class%3D%22hljs-string%22%3E'serviceWorker'%3C%2Fspan%3E%20%3Cspan%20class%3D%22hljs-keyword%22%3Ein%3C%2Fspan%3E%20navigator)%20%7B%20%20%0A%20%20%20%20navigator.serviceWorker.register(%3Cspan%20class%3D%22hljs-string%22%3E'.%2Fsw.js'%3C%2Fspan%3E)%0A%20%20%20%20.then(%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-params%22%3Eregistration%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20%20%20%20%20%3Cspan%20class%3D%22hljs-built_in%22%3Econsole%3C%2Fspan%3E.log(%3Cspan%20class%3D%22hljs-string%22%3E%22Service%20Worker%20Registered%22%3C%2Fspan%3E%2C%20registration)%3B%0A%20%20%20%20%7D)%0A%20%20%20%20.catch(%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-params%22%3Eerr%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20%20%20%20%20%3Cspan%20class%3D%22hljs-built_in%22%3Econsole%3C%2Fspan%3E.log(%3Cspan%20class%3D%22hljs-string%22%3E%22Service%20Worker%20Failed%20to%20Register%22%3C%2Fspan%3E%2C%20err)%3B%0A%20%20%20%20%7D)%0A%7D</code>")]),a("p",[s._v("Service Worker 注册成功，并不意味着它已经完成安装，也不能说明它已经激活，仅仅是脚本被成功解析，与 document 同源，而且源协议是 HTTPS。一旦完成注册，Service Worker 将进入下一状态。")]),a("h2",{attrs:{id:"-installing-"}},[s._v("正在安装（Installing）")]),a("p",[s._v("Service Worker 脚本解析完成后，浏览器会试着安装，进入下一状态，“installing”。在 Service Worker "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[s._v("注册（registration）")]),s._v(" 对象中，我们可以通过 "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[s._v("installing")]),s._v(" 子对象检查该状态。")]),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"pre-area",attrs:{width:"0",height:"0"}},[s._v("<code class=\"hljs lang-javascript\">%3Cspan%20class%3D%22hljs-comment%22%3E%2F*%20In%20main.js%20*%2F%3C%2Fspan%3E%0Anavigator.serviceWorker.register(%3Cspan%20class%3D%22hljs-string%22%3E'.%2Fsw.js'%3C%2Fspan%3E).then(%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-params%22%3Eregistration%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%20%20%0A%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E%20(registration.installing)%20%7B%0A%20%20%20%20%20%20%20%20%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20Service%20Worker%20is%20Installing%3C%2Fspan%3E%0A%20%20%20%20%7D%0A%7D)</code>")]),a("p",[s._v("在 installing 状态中，Service Worker 脚本中的 "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[s._v("install")]),s._v(" 事件被执行。我们通常在安装事件中，为 document 缓存静态文件。")]),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"pre-area",attrs:{width:"0",height:"0"}},[s._v("<code class=\"hljs lang-javascript\">%3Cspan%20class%3D%22hljs-comment%22%3E%2F*%20In%20sw.js%20*%2F%3C%2Fspan%3E%0Aself.addEventListener(%3Cspan%20class%3D%22hljs-string%22%3E'install'%3C%2Fspan%3E%2C%20%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-params%22%3Eevent%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%20%20%0A%20%20event.waitUntil(%0A%20%20%20%20caches.open(currentCacheName).then(%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-params%22%3Ecache%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Ereturn%3C%2Fspan%3E%20cache.addAll(arrayOfFilesToCache)%3B%0A%20%20%20%20%7D)%0A%20%20)%3B%0A%7D)%3B</code>")]),a("p",[s._v("若事件中有 "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[s._v("event.waitUntil()")]),s._v(" 方法，则 installing 事件会一直等到该方法中的 Promise 完成之后才会成功；若 Promise 被拒，则安装失败，Service Worker 直接进入"),a("strong",[s._v("废弃（redundant）")]),s._v("状态。")]),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"pre-area",attrs:{width:"0",height:"0"}},[s._v("<code class=\"hljs lang-javascript\">%3Cspan%20class%3D%22hljs-comment%22%3E%2F*%20In%20sw.js%20*%2F%3C%2Fspan%3E%0Aself.addEventListener(%3Cspan%20class%3D%22hljs-string%22%3E'install'%3C%2Fspan%3E%2C%20%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-params%22%3Eevent%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%20%20%0A%20%20event.waitUntil(%0A%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Ereturn%3C%2Fspan%3E%20%3Cspan%20class%3D%22hljs-built_in%22%3EPromise%3C%2Fspan%3E.reject()%3B%20%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20Failure%3C%2Fspan%3E%0A%20%20)%3B%0A%7D)%3B%20%0A%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20Install%20Event%20will%20fail%3C%2Fspan%3E</code>")]),a("h2",{attrs:{id:"-installed-waiting-"}},[s._v("安装成功/等待中（Installed/Waiting）")]),s._m(1),a("p",[s._v("在 Service Worker "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[s._v("注册（registration）")]),s._v(" 对象中，可通过 "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[s._v("waiting")]),s._v(" 子对象检查该状态。")]),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"pre-area",attrs:{width:"0",height:"0"}},[s._v("<code class=\"hljs lang-javascript\">%3Cspan%20class%3D%22hljs-comment%22%3E%2F*%20In%20main.js%20*%2F%3C%2Fspan%3E%0Anavigator.serviceWorker.register(%3Cspan%20class%3D%22hljs-string%22%3E'.%2Fsw.js'%3C%2Fspan%3E).then(%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-params%22%3Eregistration%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%20%20%0A%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E%20(registration.waiting)%20%7B%0A%20%20%20%20%20%20%20%20%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20Service%20Worker%20is%20Waiting%3C%2Fspan%3E%0A%20%20%20%20%7D%0A%7D)</code>")]),a("p",[s._v("这是通知 App 用户升级新版本或自动升级的好时机。")]),a("h2",{attrs:{id:"-activating-"}},[s._v("正在激活（Activating）")]),s._m(2),a("ul",[s._m(3),a("li",[a("p",[s._v("Service Worker 脚本中的 "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[s._v("self.skipWaiting()")]),s._v(" 方法被调用")])]),s._m(4),s._m(5)]),a("p",[s._v("处于 activating 状态期间，Service Worker 脚本中的 "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[s._v("activate")]),s._v(" 事件被执行。我们通常在 activate 事件中，清理 cache 中的文件。")]),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"pre-area",attrs:{width:"0",height:"0"}},[s._v("<code class=\"hljs lang-javascript\">%3Cspan%20class%3D%22hljs-comment%22%3E%2F*%20In%20sw.js%20*%2F%3C%2Fspan%3E%0Aself.addEventListener(%3Cspan%20class%3D%22hljs-string%22%3E'activate'%3C%2Fspan%3E%2C%20%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-params%22%3Eevent%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%20%20%0A%20%20event.waitUntil(%0A%20%20%20%20%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%20cache%20%E5%90%8D%E7%A7%B0%3C%2Fspan%3E%0A%20%20%20%20caches.keys().then(%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-params%22%3EcacheNames%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Ereturn%3C%2Fspan%3E%20%3Cspan%20class%3D%22hljs-built_in%22%3EPromise%3C%2Fspan%3E.all(%0A%20%20%20%20%20%20%20%20%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E4%B8%8D%E5%90%8C%E4%BA%8E%E5%BD%93%E5%89%8D%E7%89%88%E6%9C%AC%E5%90%8D%E7%A7%B0%20cache%20%E4%B8%8B%E7%9A%84%E5%86%85%E5%AE%B9%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20cacheNames.filter(%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-params%22%3EcacheName%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20%20%20%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Ereturn%3C%2Fspan%3E%20cacheName%20!%3D%20currentCacheName%3B%0A%20%20%20%20%20%20%20%20%7D).map(%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-params%22%3EcacheName%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%0A%20%20%20%20%20%20%20%20%20%20%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20%E5%88%A0%E9%99%A4%E5%86%85%E5%AE%B9%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Ereturn%3C%2Fspan%3E%20caches.delete(cacheName)%3B%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20)%3B%20%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20end%20Promise.all()%3C%2Fspan%3E%0A%20%20%20%20%7D)%20%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20end%20caches.keys()%3C%2Fspan%3E%0A%20%20)%3B%20%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20end%20event.waitUntil()%3C%2Fspan%3E%0A%7D)%3B</code>")]),a("p",[s._v("与 install 事件类似，如果 activate 事件中存在 "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[s._v("event.waitUntil()")]),s._v(" 方法，则在其中的 Promise 完成之后，激活才会成功。如果 Promise 被拒，激活事件失败，Service Worker 进入"),a("strong",[s._v("废弃（redundant）")]),s._v("状态。")]),a("h2",{attrs:{id:"-activated-"}},[s._v("激活成功（Activated）")]),a("p",[s._v("如果激活成功，Service Worker 进入 "),a("strong",[s._v("active")]),s._v(" 状态。在此状态中，其成为接受 document 全面控制的激活态 worker。在 Service Worker "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[s._v("注册（registration）")]),s._v(" 对象中，可以通过 "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[s._v("active")]),s._v(" 子对象检查此状态。")]),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"pre-area",attrs:{width:"0",height:"0"}},[s._v("<code class=\"hljs lang-javascript\">%3Cspan%20class%3D%22hljs-comment%22%3E%2F*%20In%20main.js%20*%2F%3C%2Fspan%3E%0Anavigator.serviceWorker.register(%3Cspan%20class%3D%22hljs-string%22%3E'.%2Fsw.js'%3C%2Fspan%3E).then(%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-params%22%3Eregistration%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%20%20%0A%20%20%20%20%3Cspan%20class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E%20(registration.active)%20%7B%0A%20%20%20%20%20%20%20%20%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20Service%20Worker%20is%20Active%3C%2Fspan%3E%0A%20%20%20%20%7D%0A%7D)</code>")]),a("p",[s._v("如果 Service Worker 处于激活态，就可以应对事件性事件 —— "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[s._v("fetch")]),s._v(" 和 "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"codespan",attrs:{width:"0",height:"0"}},[s._v("message")]),s._v("。")]),a("textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"pre-area",attrs:{width:"0",height:"0"}},[s._v("<code class=\"hljs lang-javascript\">%3Cspan%20class%3D%22hljs-comment%22%3E%2F*%20In%20sw.js%20*%2F%3C%2Fspan%3E%0A%0Aself.addEventListener(%3Cspan%20class%3D%22hljs-string%22%3E'fetch'%3C%2Fspan%3E%2C%20%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-params%22%3Eevent%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%20%20%0A%20%20%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20Do%20stuff%20with%20fetch%20events%3C%2Fspan%3E%0A%7D)%3B%0A%0Aself.addEventListener(%3Cspan%20class%3D%22hljs-string%22%3E'message'%3C%2Fspan%3E%2C%20%3Cspan%20class%3D%22hljs-function%22%3E%3Cspan%20class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E(%3Cspan%20class%3D%22hljs-params%22%3Eevent%3C%2Fspan%3E)%20%3C%2Fspan%3E%7B%20%20%0A%20%20%3Cspan%20class%3D%22hljs-comment%22%3E%2F%2F%20Do%20stuff%20with%20postMessages%20received%20from%20document%3C%2Fspan%3E%0A%7D)%3B</code>")]),a("h2",{attrs:{id:"-redundant-"}},[s._v("废弃（Redundant）")]),s._m(6),s._m(7),a("p",[s._v("如果 Service Worker 因前两个原因失败，我们可以通过开发者工具看到信息（以及其他相关信息）——")]),a("p",[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://p.ssl.qhimg.com/t0141f8766c67ce01c1.png",expression:"`https://p.ssl.qhimg.com/t0141f8766c67ce01c1.png`"}],attrs:{alt:"Service Worker Redundant in DevTools"}})]),a("p",[s._v("如果已存在前一版本的激活态 Service Worker，它会继续保持对 document 的控制。")])])]),s.post.prev.title||s.post.next.title?a("nav",{staticClass:"pagination"},[s.post.prev.title?a("nuxt-link",{staticClass:"prev",attrs:{to:"/post/"+s.post.prev.pathname,title:s.post.prev.title}},[s._v("« "+s._s(s.post.prev.title))]):s._e(),s.post.next.title?a("nuxt-link",{staticClass:"next",attrs:{to:"/post/"+s.post.next.pathname,title:s.post.next.title}},[s._v(s._s(s.post.next.title)+" »")]):s._e()],1):s._e(),a("gitalk",{attrs:{tags:s.tags}})],1)};t._withStripped=!0;var n={render:t,staticRenderFns:[function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("p",[s._v("Service Worker 可能拥有以下六种状态的一种："),a("strong",[s._v("解析成功（parsed）")]),s._v("，"),a("strong",[s._v("正在安装（installing）")]),s._v("，"),a("strong",[s._v("安装成功（installed）")]),s._v("，"),a("strong",[s._v("正在激活（activating）")]),s._v("，"),a("strong",[s._v("激活成功（activated）")]),s._v("，"),a("strong",[s._v("废弃（redundant）")]),s._v("。")])},function(){var s=this.$createElement,e=this._self._c||s;return e("p",[this._v("如果安装成功，Service Worker 进入"),e("strong",[this._v("安装成功（installed）")]),this._v("（也称为"),e("strong",[this._v("等待中[waiting]")]),this._v("）状态。在此状态中，它是一个有效的但尚未激活的 worker。它尚未纳入 document 的控制，确切来说是在等待着从当前 worker 接手。")])},function(){var s=this.$createElement,e=this._self._c||s;return e("p",[this._v("处于 waiting 状态的 Service Worker，在以下之一的情况下，会被触发 "),e("strong",[this._v("activating")]),this._v(" 状态。")])},function(){var s=this.$createElement,e=this._self._c||s;return e("li",[e("p",[this._v("当前已无激活状态的 worker")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("li",[e("p",[this._v("用户已关闭 Service Worker 作用域下的所有页面，从而释放了此前处于激活态的 worker")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("li",[e("p",[this._v("超出指定时间，从而释放此前处于激活态的 worker")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("p",[this._v("Service Worker 可能以下之一的原因而被"),e("strong",[this._v("废弃")]),this._v("（redundant，原意为“多余的，累赘的”）——")])},function(){var s=this.$createElement,e=this._self._c||s;return e("ul",[e("li",[e("p",[this._v("installing 事件失败")])]),e("li",[e("p",[this._v("activating 事件失败")])]),e("li",[e("p",[this._v("新的 Service Worker 替换其成为激活态 worker")])])])}]};e.a=n},cSGb:function(s,e,a){"use strict";var t={title:"[译] Service Worker 生命周期",description:"Service Worker 生命周期",keywords:"翻译,Service Worker",pathname:"the-service-worker-lifecycle",translation:{author:"@Ire Aderinokun",social:"https://twitter.com/ireaderinokun",from:"https://bitsofco.de/the-service-worker-lifecycle/"},create_time:"2016-07-25",prev:{title:"[译] eBay：style & speed",pathname:"browse-ebay-with-style-and-speed-ebay"},next:{title:"[译] 从发展历史理解 ES6 Module",pathname:"understanding-es6-modules-via-their-history"}};e.a={head:function(){return{title:t.title,meta:[{name:"keywords",content:t.keywords||""},{name:"description",content:t.description}]}},data:function(){return{post:t,post_url:this.$config.site_url+"/post/"+t.pathname,tags:t.tags}},mounted:function(){this.$fixCode()}}}});